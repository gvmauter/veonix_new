parallax = function(el) {if ($(el).length>0) {parallaxJS(el);}}

parallaxJS = function(el) {
    client_h=document.body.clientHeight;
    cHD = document.body.clientHeight;
    if (cHD>1000) {
        cHD = 1000;
    }
    if (document.body.clientWidth > 1040) {
        goFunct = function() {
            let scrollTop = scrollbar.offset.y;      
            $(el).each(function() {
                var maxVal = $(this).data("parallax")
                var posit = $(this).attr('data-parallax-pos');
                var elementTop = $(this).offset().top;
                var elementTopFixed = elementTop+scrollTop-(client_h*0.2);
                var elementG0 = client_h/(elementTop - (client_h))
                valueIf = scrollTop + client_h;
                n = elementTopFixed - scrollTop
                l = $(this).outerHeight();
                if ($(this).hasClass("pBG")) {
                    var maxVal = $(this).data("parallax")
                    var posit = $(this).attr('data-parallax-pos');
                    var elementTop = $(this).offset().top;
                    var elementTopFixed = elementTop+scrollTop-(client_h*0.2);
                    var elementG0 = client_h/(elementTop - (client_h))
                    valueIf = scrollTop + client_h;
                    n = elementTopFixed - scrollTop
                    l = $(this).outerHeight();
                    if (valueIf >= elementTopFixed) {
                        b = (n - cHD / 2 + l - scrollTop) * maxVal;
                        // if (b>=maxVal) {
                        //     b = maxVal;
                        // }
                        if (typeof posit !== 'undefined' && posit !== false) {
                            if (posit == "horizontal") {
                                $(this).css({
                                    "-webkit-transform": 'translate3d(' + b + 'px,0,0)',
                                    "-moz-transform": 'translate3d(' + b + 'px,0,0)',
                                    "transform": 'translate3d(' + b + 'px,0,0)',
                                    "will-change": 'transform',
                                    "transition": "transform .1s linear",
                                })
                            } else if(posit == "horizontal-minus") {
                                $(this).css({
                                    "-webkit-transform": 'translate3d(' + -b + 'px,0,0)',
                                    "-moz-transform": 'translate3d(' + -b + 'px,0,0)',
                                    "transform": 'translate3d(' + b + 'px,0,0)',
                                    "will-change": 'transform',
                                    "transition": "transform .1s linear",
                                }) 
                            }
                        } else {                
                            if (b<0) {
                                $(this).css({
                                    "background-position-y": ''+ b + 'px',
                                    "will-change": 'transform',
                                    "transition": "transform .1s linear",
                                })
                            }
                        }
                    }
                } else {

                    if (valueIf >= elementTopFixed) {
                        b = (n - cHD / 2 + l - scrollTop) * maxVal;
                        // if (b>=maxVal) {
                        //     b = maxVal;
                        // }
                        if (typeof posit !== 'undefined' && posit !== false) {
                            if (posit == "horizontal") {
                                $(this).css({
                                    "-webkit-transform": 'translate3d(' + b + 'px,0,0)',
                                    "-moz-transform": 'translate3d(' + b + 'px,0,0)',
                                    "transform": 'translate3d(' + b + 'px,0,0)',
                                    "will-change": 'transform',
                                    "transition": "transform .1s linear",
                                })
                            } else if(posit == "horizontal-minus") {
                                $(this).css({
                                    "-webkit-transform": 'translate3d(' + -b + 'px,0,0)',
                                    "-moz-transform": 'translate3d(' + -b + 'px,0,0)',
                                    "transform": 'translate3d(' + b + 'px,0,0)',
                                    "will-change": 'transform',
                                    "transition": "transform .1s linear",
                                }) 
                            }
                        } else {                
                            $(this).css({
                                "-webkit-transform": 'translate3d(0,' + b + 'px,0)',
                                "-moz-transform": 'translate3d(0,' + b + 'px,0)',
                                "transform": 'translate3d(0,' + b + 'px,0)',
                                "will-change": 'transform',
                                "transition": "transform .1s linear",
                            })
                        }
                    }
                }
                
            })
        }
        $(document).ready(function () {
            goFunct();
        });
        scrollbar.addListener((status) => {
                 
            goFunct() 
        });
    } else {
        $(window).on("scroll", function() {
            let scrollTop = $(window).scrollTop();
            $(el).each(function() {
                var maxVal = $(this).data("parallax")
                var posit = $(this).attr('data-parallax-pos');
                var elementTop = $(this).offset().top;
                var elementTopFixed = elementTop-(client_h*0.2);
                var elementG0 = client_h/(elementTop - (client_h))
                valueIf = scrollTop + client_h;
                n = elementTopFixed 
                l = $(this).outerHeight();
                //console.log((n - client_h / 2 + l - scrollTop) * 0.1);
                if (valueIf >= elementTopFixed) {
                    b = (n - cHD / 2 + l - scrollTop) * maxVal;
                    // if (b>=maxVal) {
                    //     b = maxVal;
                    // }
                    if (typeof posit !== 'undefined' && posit !== false) {
                        if (posit == "horizontal") {
                            $(this).css({
                                "-webkit-transform": 'translate3d(' + b + 'px,0,0)',
                                "-moz-transform": 'translate3d(' + b + 'px,0,0)',
                                "transform": 'translate3d(' + b + 'px,0,0)',
                                "will-change": 'transform',
                                "transition": "transform .1s linear",
                            })
                        } else if(posit == "horizontal-minus") {
                            $(this).css({
                                "-webkit-transform": 'translate3d(' + -b + 'px,0,0)',
                                "-moz-transform": 'translate3d(' + -b + 'px,0,0)',
                                "transform": 'translate3d(' + b + 'px,0,0)',
                                "will-change": 'transform',
                                "transition": "transform .1s linear",
                            }) 
                        }
                    } else {                
                        $(this).css({
                            "-webkit-transform": 'translate3d(0,' + b + 'px,0)',
                            "-moz-transform": 'translate3d(0,' + b + 'px,0)',
                            "transform": 'translate3d(0,' + b + 'px,0)',
                            "will-change": 'transform',
                            "transition": "transform .1s linear",
                        })
                    }
                }
            })
        });
    }
   
}