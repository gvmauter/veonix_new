CREATE TABLE IF NOT EXISTS `b_wdi_profiles` (
  `ID` int(11) NOT NULL AUTO_INCREMENT,
  `NAME` varchar(255) NOT NULL,
  `ACTIVE` char(1) NOT NULL DEFAULT 'Y',
  `SORT` int(11) NOT NULL DEFAULT '100',
  `DESCRIPTION` longtext NOT NULL,
  `HANDLER` varchar(255) NOT NULL,
  `DATE_CREATED` datetime NOT NULL,
  `DATE_MODIFIED` datetime DEFAULT NULL,
  `DATE_LAST_START` datetime DEFAULT NULL,
  `DATE_LAST_SUCCESS` datetime DEFAULT NULL,
  `DATE_LAST_ACTION` datetime DEFAULT NULL,
  `DATE_FILE` datetime DEFAULT NULL,
	`STATUS_CODE` varchar(255) DEFAULT NULL,
  `STATUS` varchar(255) DEFAULT NULL,
  `SECTION_COUNT` int(11) NOT NULL DEFAULT '0',
  `SECTION_INDEX` int(11) NOT NULL DEFAULT '0',
  `ELEMENT_INDEX` int(11) NOT NULL DEFAULT '0',
  `ELEMENT_COUNT` int(11) NOT NULL DEFAULT '0',
  `OFFER_INDEX` int(11) NOT NULL DEFAULT '0',
  `OFFER_COUNT` int(11) NOT NULL DEFAULT '0',
  `SESSION_ID` varchar(32) DEFAULT NULL,
  `IGNORE_ERRORS` char(1) NOT NULL DEFAULT 'N',
  `LAST_ERROR` text,
  `PARAMS` longtext NOT NULL,
  `MATCHES` longtext NOT NULL,
  PRIMARY KEY (`ID`)
);
CREATE TABLE IF NOT EXISTS `b_wdi_data` (
  `ID` int(11) NOT NULL AUTO_INCREMENT,
  `EXTERNAL_ID` text NOT NULL,
  `OBJECT_ID` int(11) DEFAULT NULL,
  `OPERATION` char(1) NOT NULL,
  `TYPE` char(1) NOT NULL,
  `PARENT_ID` int(11) NOT NULL,
  `MORE_PARENT_ID` text NOT NULL,
  `IBLOCK_ID` int(11) NOT NULL,
  `SECTION_ID` int(11) NOT NULL,
  `FIELDS` text NOT NULL,
  `FILTER` text NOT NULL,
  `SESSION_ID` varchar(32) NOT NULL,
  `PROFILE_ID` int(11) NOT NULL,
  `DATETIME` datetime NOT NULL,
  `STATUS` char(1) NOT NULL DEFAULT 'N',
  `DEBUG_DATA` text,
  PRIMARY KEY (`ID`),
  KEY `ix_general_parent` (`PROFILE_ID`,`SESSION_ID`,`PARENT_ID`),
  KEY `ix_general_operation` (`PROFILE_ID`,`SESSION_ID`,`OPERATION`),
  KEY `ix_general_type` (`PROFILE_ID`,`SESSION_ID`,`TYPE`),
  KEY `ix_parent` (`PARENT_ID`),
  KEY `ix_general` (`PROFILE_ID`,`SESSION_ID`)
);